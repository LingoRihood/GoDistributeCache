<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36" version="29.2.7">
  <diagram name="第 1 页" id="JbGq_ZWAGHTnP0Hs1kqZ">
    <mxGraphModel dx="1858" dy="531" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="qhopqiZGcdwvBp5uBlWC-1" parent="1" style="swimlane;startSize=0;" value="" vertex="1">
          <mxGeometry height="200" width="310" x="40" y="40" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-2" parent="qhopqiZGcdwvBp5uBlWC-1" style="whiteSpace=wrap;html=1;" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(35, 39, 46); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 28px; white-space: pre;&quot;&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;ByteView&lt;/span&gt; &lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;div style=&quot;color: rgb(171, 178, 191); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; white-space: pre; line-height: 28px;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;func&lt;/span&gt; (&lt;span style=&quot;color: rgb(224, 108, 117);&quot;&gt;b &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;ByteView&lt;/span&gt;) &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;Len&lt;/span&gt;() &lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;int&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(171, 178, 191); line-height: 28px;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func cloneBytes(b []byte) []byte&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(171, 178, 191); line-height: 28px;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (b ByteView) ByteSLice() []byte&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (b ByteView) String() string&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="150" width="270" x="20" y="40" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-3" parent="1" style="swimlane;startSize=0;" value="" vertex="1">
          <mxGeometry height="420" width="600" x="-90" y="310" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-6" parent="qhopqiZGcdwvBp5uBlWC-3" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;cache.go&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="225" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-4" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;byteview.go&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="140" y="50" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-8" parent="1" style="whiteSpace=wrap;html=1;" value="&lt;div style=&quot;color: rgb(171, 178, 191); background-color: rgb(35, 39, 46); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; line-height: 28px; white-space: pre;&quot;&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;type&lt;/span&gt; &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Cache&lt;/span&gt; &lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type CacheOptions struct&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func DefaultCacheOptions() CacheOptions&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func NewCache(opts CacheOptions) *Cache&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *Cache) ensureInitialized()&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *Cache) Stats() map[string]interface{}&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *Cache) Add(key string, value ByteView)&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *Cache) Get(ctx context.Context, key string) (value ByteView, ok bool)&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *Cache) AddWithExpiration(key string, value ByteView, expirationTime time.Time)&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *Cache) Delete(key string) bool&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *Cache) Clear()&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(198, 120, 221);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *Cache) Len() int&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *Cache) Close()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="380" width="580" x="-80" y="340" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-10" parent="1" style="swimlane;startSize=0;" value="" vertex="1">
          <mxGeometry height="190" width="410" x="-80" y="790" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-11" parent="qhopqiZGcdwvBp5uBlWC-10" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;storer.go&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="155" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-12" parent="1" style="whiteSpace=wrap;html=1;" value="&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type Value interface&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type Storer interface&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type CacheType string&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type Options struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func NewStore(cacheType CacheType, opts Options) Storer&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="150" width="390" x="-70" y="820" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-14" parent="1" style="swimlane;startSize=0;" value="" vertex="1">
          <mxGeometry height="600" width="710" x="-80" y="1040" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-15" parent="qhopqiZGcdwvBp5uBlWC-14" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;lru.go&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="305" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-16" parent="1" style="whiteSpace=wrap;html=1;" value="&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type lruCache struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type lruEntry struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func newLRUCache(opts Options) *lruCache&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) cleanupLoop()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) Get(key string) (Value, bool)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) Set(key string, value Value) error&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) SetWithExpiration(key string, value Value, expiration time.Duration) error&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) Delete(key string) bool&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) Clear()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) Len() int&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) removeElement(elem *list.Element)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) evict()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) Close()&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) GetWithExpiration(key string) (Value, time.Duration, bool)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) GetExpiration(key string) (time.Time, bool)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) UpdateExpiration(key string, expiration time.Duration) bool&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) UsedBytes() int64&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) MaxBytes() int64&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *lruCache) SetMaxBytes(maxBytes int64)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="550" width="660" x="-70" y="1070" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-17" parent="1" style="swimlane;startSize=0;" value="" vertex="1">
          <mxGeometry height="820" width="680" x="-80" y="1680" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-18" parent="qhopqiZGcdwvBp5uBlWC-17" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;lru2.go&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="305" y="10" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-19" parent="1" style="whiteSpace=wrap;html=1;" value="&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type node struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type cache struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type lru2Store struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func isExpired(expireAt, now int64) bool&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func computeExpireAt(expiration time.Duration) int64&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func Create(cap uint16) *cache&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func maskOfNextPowOf2(cap uint16) uint16&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func newLRU2Cache(opts Options) *lru2Store&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func hashBKRD(s string) (hash int32)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func Now() int64&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *cache) del(key string) (*node, int, int64)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (s *lru2Store) delete(key string, idx int32) bool&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (s *lru2Store) Get(key string) (Value, bool)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (s *lru2Store) Set(key string, value Value) error&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (s *lru2Store) SetWithExpiration(key string, value Value, expiration time.Duration) error&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (s *lru2Store) Delete(key string) bool&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *cache) walk(walker func(key string, value Value, expireAt int64) bool)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (s *lru2Store) Clear()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (s *lru2Store) Len() int&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (s *lru2Store) Close()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (s *lru2Store) cleanupLoop()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func init()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *cache) adjust(idx, f, t uint16)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *cache) put(key string, val Value, expireAt int64, onEvicted func(string, Value)) int&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (c *cache) get(key string) (*node, int)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (s *lru2Store) _get(key string, idx, level int32) (*node, int)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="770" width="660" x="-70" y="1720" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-20" parent="1" style="swimlane;startSize=0;" value="" vertex="1">
          <mxGeometry height="120" width="230" x="-80" y="2550" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-21" parent="qhopqiZGcdwvBp5uBlWC-20" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;config.go&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="65" y="10" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-22" parent="qhopqiZGcdwvBp5uBlWC-20" style="whiteSpace=wrap;html=1;" value="&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type Config struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;var DefaultConfig = &amp;amp;Config&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="190" x="20" y="40" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-23" parent="1" style="swimlane;startSize=0;" value="" vertex="1">
          <mxGeometry height="430" width="360" x="200" y="2550" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-24" parent="qhopqiZGcdwvBp5uBlWC-23" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;con_hash.go&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="140" y="10" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-25" parent="qhopqiZGcdwvBp5uBlWC-23" style="whiteSpace=wrap;html=1;" value="&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type node struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type Map struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type Option func(*Map)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func New(opts ...Option) *Map&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (m *Map) startBalancer()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func WithConfig(config *Config) Option&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (m *Map) addNode(node string, replicas int)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (m *Map) Add(nodes ...string) error&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (m *Map) Remove(node string) error&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (m *Map) Get(key string) string&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (m *Map) checkAndRebalance()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (m *Map) rebalanceNodes()&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (m *Map) GetStats() map[string]float64&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="380" width="330" x="15" y="40" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-29" parent="1" style="swimlane;startSize=0;" value="" vertex="1">
          <mxGeometry height="120" width="280" x="-80" y="3040" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-30" parent="qhopqiZGcdwvBp5uBlWC-29" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;utils.go&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="90" y="10" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-31" parent="qhopqiZGcdwvBp5uBlWC-29" style="whiteSpace=wrap;html=1;" value="&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func ValidPeerAddr(addr string) bool&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;var DefaultConfig = &amp;amp;Config&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="260" x="10" y="40" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-32" parent="1" style="swimlane;startSize=0;" value="" vertex="1">
          <mxGeometry height="760" width="620" x="240" y="3040" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-33" parent="qhopqiZGcdwvBp5uBlWC-32" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;group.go&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="260" y="10" as="geometry" />
        </mxCell>
        <mxCell id="qhopqiZGcdwvBp5uBlWC-34" parent="1" style="whiteSpace=wrap;html=1;" value="&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type Getter interface&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type GetterFunc func(ctx context.Context, key string) ([]byte, error)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (f GetterFunc) Get(ctx context.Context, key string) ([]byte, error)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type Group struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type groupStats struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type GroupOption func(*Group)&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func WithExpiration(d time.Duration) GroupOption&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func WithPeers(peers PeerPicker) GroupOption&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func WithCacheOptions(opts CacheOptions) GroupOption&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func NewGroup(name string, cacheBytes int64, getter Getter, opts ...GroupOption) *Group&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func GetGroup(name string) *Group&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) Get(ctx context.Context, key string) (ByteView, error)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) Set(ctx context.Context, key string, value []byte) error&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) Delete(ctx context.Context, key string) error&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) syncToPeers(ctx context.Context, op string, key string, value []byte)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) Clear()&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) Close() error&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: light-dark(rgb(198, 120, 221), rgb(160, 93, 180));&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) load(ctx context.Context, key string) (value ByteView, err error)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) loadData(ctx context.Context, key string) (value ByteView, err error)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) getFromPeer(ctx context.Context, peer Peer, key string) (ByteView, error)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) RegisterPeers(peers PeerPicker)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func (g *Group) Stats() map[string]any&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func ListGroups() []string&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func DestroyGroup(name string) bool&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func DestroyAllGroups()&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="710" width="600" x="250" y="3080" as="geometry" />
        </mxCell>
        <mxCell id="tI1erX4b_BSaS34FGblJ-1" parent="1" style="swimlane;startSize=0;" value="" vertex="1">
          <mxGeometry height="260" width="510" x="-310" y="3200" as="geometry" />
        </mxCell>
        <mxCell id="tI1erX4b_BSaS34FGblJ-2" parent="tI1erX4b_BSaS34FGblJ-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;register.go&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="205" y="10" as="geometry" />
        </mxCell>
        <mxCell id="tI1erX4b_BSaS34FGblJ-3" parent="1" style="whiteSpace=wrap;html=1;" value="&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;type Config struct&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;var DefaultConfig = &amp;amp;Config&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;func Register(ctx context.Context, svcName, addr string) error&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(35, 39, 46); line-height: 28px; color: rgb(171, 178, 191);&quot;&gt;&lt;font color=&quot;#c678dd&quot; face=&quot;Consolas, Courier New, monospace&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="190" width="490" x="-300" y="3240" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
